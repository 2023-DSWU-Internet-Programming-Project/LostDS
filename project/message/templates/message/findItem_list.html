<!-- 습득물을 올리는 페이지 -->
{% extends 'main/nav.html' %}
<!DOCTYPE html>
{% block content %}
{% load static %}
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LostDS</title>
    <link rel="stylesheet" href="{% static 'message/css/base_list.css' %}" media="screen" />
</head>

<body>
    <div style="display: flex; flex-direction: column;">

        <div class="container">
            <div class="main-title main-title-font">
                <br>물건을 습득하셨나요?<br>습득하신 분실물을 올려주세요!
            </div>

            <!-- 게시글 생성 버튼 및 '완료'페이지 이동 버튼 -->
            <div class="post-button">
                <a class="detail-link-new-post" href="/message/complete_post/">
                    <div class="post-list-move-button">
                        <img src="/static/message/image/complete.png" width="40" height="40">
                        찾아간 물품
                    </div>
                </a>
                {% if user.is_authenticated %}
                <a class="detail-link-new-post" href="/message/find/create_post/">
                    <div class="post-create-button">
                        <img src="/static/message/image/new_post_icon.png" width="40" height="40">
                        글 쓰기
                    </div>
                </a>
                {% else %}
                <a class="detail-link-new-post" href="/login/">
                    <div class="post-create-button">
                        <img src="/static/message/image/new_post_icon.png" width="40" height="40">
                        글 쓰기
                    </div>
                </a>
                {% endif %}
            </div>

            <!-- 카테고리 -->
            <div class="category-container">
                <div class="category-content">
                    <a class="detail-link" href="/message/find/">
                        <div class="icon-text-wrapper">
                            <img src="/static/message/image/all.png" width="40" height="40">
                            <div class="category-font">전체</div>
                        </div>
                    </a>
                </div>
                {% for category in categories %}
                <div class="category-content">
                    <a class="detail-link" href="{{ category.get_absolute_url_find }}">
                        <div class="icon-text-wrapper">
                            <img src="{{ category.head_image.url }}" width="40" height="40">
                            <div class="category-font">{{ category }}</div>
                        </div>
                    </a>
                </div>
                {% endfor %}
            </div>
            <br />
            <div class="category-tag">
                {%if category %}
                # {{ category }}
                {% endif %}
            </div>

            <!-- 게시글 -->
            <div class="post-container">
                {% for item in object_list %}
                <a class="detail-link" href="{{ item.get_absolute_url }}">
                    <div class="post-content">
                        {% if item.head_image %}
                        <img class="post-image" src="{{ item.head_image.url }}" width="330px" height="170px"
                            alt="{{ item }} head image">
                        {% else %}
                        <img class="post-image" src="https://picsum.photos/seed/{{ item.id }}/330/170"
                            alt="random_image">
                        {% endif %}
                        <div class="post-text-box">
                            <div class="post-category-font">
                                [{{ item.category }}]
                                <span class="post-created_at-font">
                                    {{ item.created_at }}
                                </span>
                            </div>
                            <hr />
                            <div class="post-title-font">
                                {{ item.title | truncatechars:20 }}
                            </div>
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>

            <div class="pagination-container">
                {% if is_paginated %}
                {% if page_obj.has_previous %}
                <button class="page-button" type="button"
                    onclick="location.href='?page={{ page_obj.previous_page_number }}'">
                    <div class="page-font">&larr; 이전</div>
                </button>
                {% endif %}

                {% if page_obj.has_next %}
                <button class="page-button" type="button"
                    onclick="location.href='?page={{ page_obj.next_page_number }}'">
                    <div class="page-font">다음 &rarr;</div>
                </button>
                {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
</body>
{% endblock %}
</html>