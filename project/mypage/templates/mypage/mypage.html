{% extends 'main/nav.html' %}

{% block content %}
{% load static %}

<html lang="ko">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{% static 'mypage/css/mypage.css' %}" media="screen">
    <title>My Page</title>
</head>

<body>
<div class="container">
    <!-- 유저 정보 -->
    <div class="user-container">
        <div class="user-content">      <!-- 여기에 사진과 회원 정보(아이디, 환영문구, 이메일) 불러옴 -->
            <img src="/static/mypage/image/profile.png" width="150" height="150">
            <div class="user-info">
                <h2>< {{ request.user.username }} >님, 환영합니다!</h2>
                <h3>ID : {{ request.user.username }}<br>E-mail : {{ request.user.email }}</h3>
            </div>
        </div>
    </div>

    <!-- 게시글 -->
    <h3 style="margin-left:-47%"><a href="/mypage/my-post">내가 쓴 게시글</a></h3>
    <div class="post-container">
        {% for post in request.user.askitem_set.all %}
        <div class="content">      <!-- 여기에 일부의 게시글 보여지도록 -->
            <ul>
                <li>
                    <h3>제목: <a href="{% url 'ask-detail' pk=post.pk %}">{{ post.title }}</a><br></h3>
                    내용: {{ post.content|slice:"10" }}
                </li>
            </ul>
        </div>
        {% endfor %}

        {% for post in request.user.finditem_set.all %}
        <div class="content">
            <ul>
                <li>
                    <h3>제목 : <a href="{% url 'find-detail' pk=post.pk %}">{{ post.title }}</a><br></h3>
                    내용 : {{ post.content|slice:"10" }}
                </li>
            </ul>
        </div>
        {% endfor %}
    </div>

    <!-- 댓글 -->
    <h3 style="margin-left:-47%"><a href="/mypage/comment">내가 쓴 댓글</a></h3>
    <div class="comment-container">
        {% for comment in request.user.comment_set.all %}
        <div class="content">   <!-- 여기에 일부의 댓글 3개정도 보여지도록 -->
            <ul>
                <li>
                    <h3>작성자 : <a href="{% if comment.post.type == 'ask' %}{% url 'ask-detail' pk=comment.post.pk %}
                                {% elif comment.post.type == 'find' %}{% url 'find-detail' pk=comment.post.pk %}
                                {% endif %}">{{ comment.author }}</a><br></h3>
                        내용 : {{ comment.content }}
                </li>
            </ul>
        </div>
        {% endfor %}
    </div>

</div>

</body>
{% endblock %}
</html>